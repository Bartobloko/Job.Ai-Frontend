<!-- Main Container -->
<div class="min-h-noScroll bg-gradient-to-br from-secondary-50 to-primary-50/30 p-4">
  <div class="max-w-4xl mx-auto space-y-4">

    <!-- Header -->
    <div class="text-center animate-fade-in">
      <div class="w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-large">
        <ng-icon name="heroUser" class="w-6 h-6 text-white"></ng-icon>
      </div>
      <h1 class="text-xl font-bold bg-gradient-to-r from-secondary-900 to-primary-700 bg-clip-text text-transparent mb-2">
        Welcome to Job.AI
      </h1>
      <p class="text-secondary-600 text-sm">Choose an account or create a new one to get started</p>
    </div>

    <!-- Users Container -->
    @if (usersStore.users() && !accountCreation && usersStore.users().length > 0) {
      <div class="bg-white/80 backdrop-blur-sm border border-white/50 rounded-xl shadow-soft hover:shadow-medium transition-all duration-300 p-4 animate-slide-up">
        <div class="flex items-center mb-4">
          <div class="w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center mr-4">
            <ng-icon name="heroUsers" class="w-5 h-5 text-white"></ng-icon>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-secondary-900">Select Account</h2>
            <p class="text-secondary-600">Choose from your existing accounts</p>
          </div>
        </div>

        <!-- User List -->
        <div class="space-y-4 mb-4">
          @for (user of usersStore.users(); track user.id) {
            <div class="group relative overflow-hidden bg-gradient-to-r from-white to-secondary-50/50 border border-secondary-200/50 rounded-2xl hover:shadow-soft transition-all duration-300 hover:scale-[1.02]">
              <!-- User Info (Clickable) -->
              <div (click)="login(user.username)" class="flex items-center gap-4 p-6 cursor-pointer">
                <!-- User Avatar -->
                <div class="w-14 h-14 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center shadow-medium group-hover:scale-110 transition-transform duration-300">
                  <ng-icon name="heroUser" class="w-7 h-7 text-white"></ng-icon>
                </div>

                <!-- User Info -->
                <div class="flex-1 min-w-0">
                  <div class="text-xl font-semibold text-secondary-900 group-hover:text-primary-700 transition-colors duration-300">
                    {{ user.username }}
                  </div>
                  <div class="text-sm text-secondary-500">Click to sign in</div>
                </div>

                <!-- Arrow Icon -->
                <div class="opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                  <ng-icon name="heroArrowLeft" class="w-5 h-5 text-primary-600 rotate-180"></ng-icon>
                </div>
              </div>

              <!-- Delete Button -->
              <button
                (click)="confirmDelete(user.id)"
                class="absolute top-4 right-4 w-8 h-8 bg-white/80 hover:bg-danger-50 text-secondary-400 hover:text-danger-500 rounded-xl flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 shadow-sm"
              >
                <ng-icon name="heroTrash" class="w-4 h-4"></ng-icon>
              </button>
            </div>
          }
        </div>

        <!-- Add Account Button -->
        <button
          (click)="accountCreation = !accountCreation"
          class="group w-full bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-semibold rounded-2xl px-6 py-4 shadow-medium hover:shadow-large transition-all duration-300 transform hover:scale-[1.02]"
        >
          <div class="flex items-center justify-center">
            <div class="w-8 h-8 bg-white/20 rounded-xl flex items-center justify-center mr-3 group-hover:bg-white/30 transition-colors duration-300">
              <ng-icon name="heroPlus" class="w-5 h-5"></ng-icon>
            </div>
            <span>Create New Account</span>
          </div>
        </button>
      </div>
    }

    <!-- Account Creation Form -->
    @if(usersStore.users().length === 0 || accountCreation) {
      <div class="animate-slide-up">
        <app-account-create-form></app-account-create-form>

        <!-- Back Button (Only show if there are existing accounts) -->
        @if(usersStore.users().length > 0) {
          <div class="mt-6">
            <button
              (click)="accountCreation = false"
              class="group w-full bg-secondary-100 hover:bg-secondary-200 text-secondary-700 font-medium rounded-2xl px-6 py-4 transition-all duration-300 transform hover:scale-[1.02] shadow-sm hover:shadow-medium"
            >
              <div class="flex items-center justify-center">
                <div class="w-8 h-8 bg-secondary-200 group-hover:bg-secondary-300 rounded-xl flex items-center justify-center mr-3 transition-colors duration-300">
                  <ng-icon name="heroArrowLeft" class="w-5 h-5"></ng-icon>
                </div>
                <span>Back to Account Selection</span>
              </div>
            </button>
          </div>
        }
      </div>
    }

    <!-- Footer -->
    <div class="text-center text-secondary-500 animate-fade-in">
      <div class="flex items-center justify-center mb-4">
        <div class="h-px bg-gradient-to-r from-transparent via-secondary-300 to-transparent flex-1"></div>
        <div class="px-4">
          <ng-icon name="heroBriefcase" class="w-5 h-5 text-secondary-400"></ng-icon>
        </div>
        <div class="h-px bg-gradient-to-r from-transparent via-secondary-300 to-transparent flex-1"></div>
      </div>
      <p class="text-sm">&copy; 2025 Job.AI Platform. All rights reserved.</p>
      <p class="text-xs mt-1">Automate your job search with intelligent AI</p>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
@if (showDeleteConfirm) {
  <div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in">
    <div class="bg-white rounded-3xl shadow-large max-w-md w-full mx-4 p-8 animate-scale-in">
      <div class="text-center mb-6">
        <div class="w-16 h-16 bg-danger-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <ng-icon name="heroExclamationTriangle" class="w-8 h-8 text-danger-600"></ng-icon>
        </div>
        <h3 class="text-2xl font-bold text-secondary-900 mb-2">Delete Account?</h3>
        <p class="text-secondary-600">This action cannot be undone. The account will be permanently removed.</p>
      </div>
      
      <div class="flex gap-4">
        <button
          (click)="cancelDelete()"
          class="flex-1 px-6 py-3 text-secondary-700 bg-secondary-100 hover:bg-secondary-200 rounded-xl font-medium transition-all duration-200 hover:scale-105"
        >
          Cancel
        </button>
        <button
          (click)="deleteAccount()"
          class="flex-1 px-6 py-3 text-white bg-danger-600 hover:bg-danger-700 rounded-xl font-medium transition-all duration-200 hover:scale-105 shadow-medium"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
}
